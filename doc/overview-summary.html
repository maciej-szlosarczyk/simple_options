<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<title>The simple_options application</title>
<link rel="stylesheet" type="text/css" href="stylesheet.css" title="EDoc">
</head>
<body bgcolor="white">
<div class="navbar"><a name="#navbar_top"></a><table width="100%" border="0" cellspacing="0" cellpadding="2" summary="navigation bar"><tr><td><a href="overview-summary.html" target="overviewFrame">Overview</a></td><td><a href="http://www.erlang.org/"><img src="erlang.png" align="right" border="0" alt="erlang logo"></a></td></tr></table></div>
<h1>The simple_options application</h1>
<p>
A library that facilitates defining options. It allows you to validate the
options user passes into your library or inside your application, to ensure
it is properly configured before started.</p>

<p>This is still an experiment. It might be not tremendously useful to anyone.</p>

<pre>Definitions = [
    {default_timeout, [
        required,
        {documentation,
         &lt;&lt;"Default timeout in miliseconds. Must be greater than 300."&gt;&gt;},
        {validation, fun
            (X) when is_integer(X) -&gt;
                case X &gt; 300 of
                    false -&gt;
                        must_be_greater_than_300; %% Errors with this atom
                    true -&gt;
                        true %%
                end;
            (_X) -&gt;
                false %% Errors with value from error_message
        end}
    ]},
    {name, [
        {default, my_app},
        {documentation, &lt;&lt;"Name of your application"&gt;&gt;},
        {validation, fun (X) -&gt; is_atom(X) end},
        {error_message, must_be_an_atom}
    ]}
].</pre>

<p>You can merge user provided options with your defintions:</p>

<pre>UserOpts = [{default_timeout, 400}],
[{name,my_app},{default_timeout,400}] =
    simple_options:merge(UserOpts, Definitions).</pre>

<p>When options provided by user are invalid or incomplete, you get an exception
error for the first defintion that does not pass validation:</p>

<pre>UserOpts = [{default_timeout, 1}, {name, 1}],
simple_options:merge(UserOpts, Definitions).
** exception error: {error,{default_timeout,must_be_greater_than_300}}

UserOpts = [{default_timeout, 400}, {name, 1}],
simple_options:merge(UserOpts, Definitions).
** exception error: {error,{name,must_be_an_atom}}</pre>
<hr>
<div class="navbar"><a name="#navbar_bottom"></a><table width="100%" border="0" cellspacing="0" cellpadding="2" summary="navigation bar"><tr><td><a href="overview-summary.html" target="overviewFrame">Overview</a></td><td><a href="http://www.erlang.org/"><img src="erlang.png" align="right" border="0" alt="erlang logo"></a></td></tr></table></div>
<p><i>Generated by EDoc</i></p>
</body>
</html>
